<launch>
  <!-- subscribes to cmd_vel topic -->
  <!-- publishes odom topic with base_link frame -->
  <!-- broadcasts odom->base_link transform -->
  <arg name="param" default="value" />
  <node pkg="roboteq_diff_driver" type="driver" name="roboteq_diff_driver" output="screen">
    <!-- enable broadcast of odom tf -->
    <param name="pub_odom_tf" value="true" />
    <!-- specify odom frame -->
    <param name="odom_frame" value="odom" />
    <!-- specify base frame -->
    <param name="base_frame" value="base_link" />
    <!-- specify cmd_vel topic -->
    <param name="cmdvel_topic" value="cmd_vel" />
    <!-- specify port for roboteq controller -->

    <param name="port0" value="/dev/ttyS5" />
    <param name="port1" value="/dev/ttyS6" />
    <param name="port2" value="/dev/ttyS0" />

    <!-- <param name="port0" value="/dev/ttyACM4" /> -->
    <!-- <param name="port1" value="/dev/ttyACM3" /> -->
    <!-- <param name="port2" value="/dev/ttyACM0" /> -->
    
<!-- specify baud for roboteq controller -->
    <param name="baud" value="115200" />
    <!-- specify whether to use open-loop motor speed control (as opposed to closed-loop)-->
    <param name="open_loop_brush" value="false" />
    <!-- specify robot wheel circumference in meters  -->
    <param name="wheel_circumference" value="0.797965" />
    <!-- specify robot drive wheel gear ratio -->
    <param name="gear_ratio_drive" value="30.0" />
    <!-- specify robot brush gear ratio -->
    <param name="gear_ratio_brush" value="4.0625" /> <!-- gearbox * 13/32-->
    <!-- specify robot track width in meters  -->
    <param name="track_width" value="0.914" />
    <!-- specify robot wheelbase in meters  -->
    <param name="wheelbase" value="0.5652" />
    <!-- specify counts-per-revolution for motor encoders (ppr*4 for quadrature encoders)  -->
    <param name="encoder_cpr" value="1080" />
    <!-- specify maximum motor current (amps) -->
    <param name="max_amps" value="25.0" />
    <!-- specify maximum motor speed (rpm) -->
    <param name="max_rpm" value="2900" />
    <!-- specify brush motor speed (rpm) -->
    <param name="brush_rpm" value="200.0" />
    <!-- specify drive motor acceleration (rpm/s * 10) -->
    <param name="accel_drive" value="15000" />
    <!-- specify brush motor acceleration (rpm/s * 10) -->
    <param name="accel_brush" value="5000" />
    <!-- kd_lf * 10^6 -->
    <param name="kp_lf" value="10000" />
    <param name="ki_lf" value="100000" />
    <param name="kd_lf" value="0" />
    <param name="kp_lr" value="10000" />
    <param name="ki_lr" value="100000" />
    <param name="kd_lr" value="0" />
    <param name="kp_rf" value="10000" />
    <param name="ki_rf" value="90000" />
    <param name="kd_rf" value="0" />
    <param name="kp_rr" value="10000" />
    <param name="ki_rr" value="100000" />
    <param name="kd_rr" value="0" />
    <param name="kp_bf" value="15000" />
    <param name="ki_bf" value="180000" />
    <param name="kd_bf" value="0.0" />
    <param name="kp_br" value="12000" />
    <param name="ki_br" value="150000" />
    <param name="kd_br" value="0.0" />
  </node>
</launch>
